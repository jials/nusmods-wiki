<section data-ng-controller="WikiController">
    <div class="nm-wrapper" ng-controller="ScrollController">

        <!-- sidebar -->
        <nav class="sidebar-wrapper navmenu-fixed-left" role="navigation" ng-controller="LeftBarCtrl">
            <div class="nav-wrapper">
                <ul class="nav" ng-repeat="link in links">
                    <li><a ng-class="{active: isActive(link.title)}" ng-click="gotoElement(link.title)">{{link.title | uppercase}}</a></li>
                </ul>
            </div>
        </nav>

        <div class="page-content-wrapper main-container" ng-controller="MainContentCtrl">

            <!-- <div class="" style="background-color:yellow;height:100px;"></div> -->
            <div class="main-content container-fluid">

                <div class="row">
                    <div class="col-md-8">
                        <h1 class="module-code">{{module.ModuleCode}}</h1>
                        <h2 class="module-title">{{module.ModuleTitle}}</h2>
                        <div id="description" class="description-wrapper">
                            <div class="page-header"><h3>Description</h3></div>
                            {{module.ModuleDescription}}
                        </div>
                        
                        <div id="prerequisite" class="prerequisite-wrapper">
                            <div class="page-header"><h3>Prerequisite</h3></div>
                            {{module.Prerequisite}}
                            <span ng-if="mod.Prerequisite == null">No prerequisite</span>
                        </div>

                        <div id="preclusion" class="preclusion-wrapper">
                            <div class="page-header"><h3>Preclusion</h3></div>
                            {{module.Preclusion}}
                            <span ng-if="mod.Preclusion == null">No preclusion</span>
                        </div>

                        <div ng-controller="OtherContentCtrl">
                            <div id="past-lecturer" class="past-lecturer-wrapper">
                                <div class="page-header"><h3>Past Lecturer</h3></div>
                                <p ng-if="pastLecturer === ''">Not past lecturer has been added! Login to edit now!</p>
                                <p ng-bind="pastLecturer"></p>

                                <div ng-controller="PastLecturerCtrl" class="edit">
                                    <script type="text/ng-template" id="PastLecturerModalContent.html">
                                        <div class="modal-header">
                                            <h3 class="modal-title">Edit Past Lecturer</h3>
                                        </div>

                                        <div class="modal-body">
                                            <form novalidate name="PastLecturerForm">

                                            <div class="form-group">
                                                <label for="pastLecturer">Past Lecturer:</label><br>
                                                <input class="form-control" name="pastLecturer" type="text" ng-model="pastLecturer.name" required></input>
                                            </div>

                                            <div class="form-group">
                                                <label for="academicYear">AY:</label><br>
                                                <div class="row">
                                                
                                                    <div class="col-xs-4">
                                                    <input class="form-control" placeholder="14" name="academicYear1" type="number" min="0" ng-model="pastLecturer.academicYear1"></input>
                                                    </div>
                                                
                                                    <div class="col-xs-1" style="padding: 0;">
                                                        <p class="form-control-static text-center">/</p>
                                                    </div>
                                                
                                                    <div class="col-xs-4">
                                                    <input class="form-control" placeholder="15" name="academicYear2" type="number" min="0" ng-model="pastLecturer.academicYear2"></input>
                                                    </div>

                                                </div> <!-- end of div.row -->
                                            </div>

                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <button class="btn btn-primary sharp" ng-click="save()">Save</button>
                                            <button class="btn btn-warning sharp" ng-click="cancel()">Cancel</button>
                                        </div>
                                    </script>
                                    <button class="btn btn-primary sharp" ng-click="open()" ng-show="authentication.user">Edit</button>
                                </div>
                            </div>

                            <div id="past-ta" class="past-ta-wrapper">
                                <div class="page-header"><h3>Past TA</h3></div>
                                <!-- <p ng-if="pastTA === []">Not past lecturer has been added! Login to edit now!</p>
                                <p ng-bind="pastTA"></p> -->

                                <div ng-controller="PastTACtrl" class="edit">
                                    <script type="text/ng-template" id="PastTAModalContent.html">
                                        <div class="modal-header">
                                            <h3 class="modal-title">Edit Past TA</h3>
                                        </div>
                                        <div class="modal-body">
                                            <form>
                                                <label for="pastTA">Past TA:</label><br>
                                                <input name="pastTA" ng-model="pastTA"></input>
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <!-- <button class="btn btn-primary" ng-click="save()">Save</button> -->
                                            <button class="btn btn-warning sharp" ng-click="cancel()">Cancel</button>
                                        </div>
                                    </script>
                                    <button class="btn btn-primary sharp" ng-click="open()" ng-show="authentication.user">Edit</button>
                                </div>
                            </div>

                            <div id="fun-facts" class="fun-facts-wrapper" ng-controller="FunFactsController">
                                <div class="page-header"><h3>Fun Facts</h3></div>
                                <div ng-controller="FunFactsModalCtrl" class="edit">
                                    <p>{{content}}</p>

                                    <script type="text/ng-template" id="FunFactsModalContent.html">
                                        <div class="modal-header">
                                            <h3 class="modal-title">Edit Fun Facts</h3>
                                        </div>
                                        <div class="modal-body">
                                            <form>
                                            <div class="form-group">
                                                <textarea class="form-control" ng-model="content" rows="4"></textarea>
                                            </div>
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <button class="btn btn-primary sharp" ng-click="save()">Save</button>
                                            <button class="btn btn-warning sharp" ng-click="cancel()">Cancel</button>
                                        </div>
                                    </script>
                                    <button class="btn btn-primary sharp" ng-click="open()" ng-show="authentication.user">Edit</button>
                                </div>
                            </div>

                            <div id="projects" class="projects-wrapper">
                                <div class="page-header"><h3>Outstanding Projects</h3></div>
                                <div ng-controller="CarouselDemoCtrl">
                                    <div ng-repeat="project in projects">
                                        <div class="page-header">{{project.user}}</div>
                                        <div style="float:left">
                                        <carousel interval="myInterval">
                                            <slide ng-repeat="slide in project.slides" active="slide.active">
                                                <img ng-src="{{slide.image}}" style="margin:auto;">
                                                <!-- <div class="carousel-caption"> -->
                                                    <!-- <h4>Slide {{$index}}</h4> hide index-->
                                                    <!-- <p>{{slide.text}}</p> -->
                                                <!-- </div> -->
                                            </slide>
                                        </carousel>
                                        </div>
                                        <div style="margin-left:405px;height:200px;overflow-y:auto">{{description}}</div>
                                        <!-- <hr> -->
                                    </div>
                                </div>
                            </div>

                            <div id="others" class="others-wrapper">
                                <div class="page-header"><h3>Others</h3></div>
                                <div ng-controller="OthersModalCtrl" class="edit">
                                    <p>{{content}}</p>
                                    
                                    <script type="text/ng-template" id="OthersModalContent.html">
                                        <div class="modal-header">
                                            <h3 class="modal-title">Edit Others</h3>
                                        </div>
                                        <div class="modal-body">
                                            <form>
                                            <div class="form-group">
                                                <textarea class="form-control" ng-model="content" rows="4"></textarea>
                                            </div>
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <button class="btn btn-primary sharp" ng-click="save()">Save</button>
                                            <button class="btn btn-warning sharp" ng-click="cancel()">Cancel</button>
                                        </div>
                                    </script>
                                    <button class="btn btn-primary sharp" ng-click="open()" ng-show="authentication.user">Edit</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">

                        <div class="content-right">
                            <div class="thumbnail">
                                <img src="/modules/wiki/img/logo/logo.png" alt="{{moduleTitle}} Logo">
                            </div>

                            <div ng-controller="FilePickerCtrl">
                                <button type="button" class="btn btn-default" ng-click="uploadFile()" ng-show="authentication.user">Upload Image</button>
                            </div>

                            <div class="links row" ng-controller="WikiLinksCtrl">
                                <!-- {{mod[0].code}} -->
                                <ul class="nav navbar-nav text-center" style="width:100%;">
                                    <li class="col-sm-6" ng-repeat="link in mod[0].links">
                                        <a href="{{link.href}}" style="color:black;">
                                            <button class="btn btn-primary btn-lg btn-block sharp">{{link.title}}</button>
                                        </a>
                                    </li>
                                </ul>
                            </div>

                            <div ng-controller="LinksModalCtrl" class="edit">
                                <script type="text/ng-template" id="LinksModalContent.html">
                                    <div class="modal-header">
                                        <h3 class="modal-title">Edit Links</h3>
                                    </div>
                                    <div class="modal-body">
                                        <form>
                                            <div class="form-group">
                                            <label style="">Home:</label><br>

                                            <div class="input-group">
                                            <div class="input-group-addon">http://</div>
                                            <input type="url" placeholder="www.homepage.com" class="form-control" type="url" ng-model="items[0]"></input>
                                            </div>
                                            </div>
                                            <div class="form-group">
                                            <label>Facebook:</label><br>

                                            <div class="input-group">
                                            <div class="input-group-addon">http://</div>
                                            <input placeholder="www.facebook.com/xxx" class="form-control" type="url" ng-model="items[1]" ></input>
                                            </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button class="btn btn-primary sharp" ng-click="save()">Save</button>
                                        <button class="btn btn-warning sharp" ng-click="cancel()">Cancel</button>
                                    </div>
                                </script>
                                <button class="btn btn-primary sharp" ng-click="open()" ng-show="authentication.user">Edit</button>
                            </div>

                            <div class="lecturers">
                                <div class="page-header">Lecturer(s):</div>
                                <!-- {{mod.History.length}} -->
                                <span ng-if="semester1 = true">{{module.History[0].Lecturers.toString()}}</span> 
                                <span ng-if="semester2 = true">{{module.History[1].Lecturers.toString()}}</span>
                            </div>
                            <div class="module-credits">
                                <div class="page-header">Module Credits:</div>
                                <span>{{module.ModuleCredit}}</span>
                            </div>
                            <div class="weekly-workload">
                                <div class="page-header">Weekly Workload:</div>
                                <span>{{module.Workload}}</span>
                            </div>
                            <div class="exam-date">
                                <div ng-if="semester1 = true">
                                <div class="page-header">Exam Date (Semester 1):</div>
                                <span ng-if="module.History[0].ExamDate != null">{{module.History[0].ExamDate | date:'medium'}}</span>
                                <span ng-if="module.History[0].ExamDate == null">No exam</span>
                                </div>

                                <div ng-if="semester2 = true">
                                <div class="page-header">Exam Date (Semester 2):</div>
                                <span ng-if="module.History[1].ExamDate != null">{{module.History[1].ExamDate | date:'medium'}}</span>
                                <span ng-if="module.History[1].ExamDate == null">No exam</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
